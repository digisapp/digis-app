# Payout System Environment Variables
# Copy this to your .env file and set actual values

# ============================================================================
# STRIPE CONFIGURATION (Required)
# ============================================================================
STRIPE_SECRET_KEY=sk_live_xxx  # or sk_test_xxx for staging
STRIPE_WEBHOOK_SECRET=whsec_xxx  # From Stripe Dashboard â†’ Webhooks

# ============================================================================
# PLATFORM DEFAULTS
# ============================================================================
PLATFORM_DEFAULT_CURRENCY=usd
PLATFORM_FEE_PERCENT=10  # Platform fee percentage (10 = 10%)

# ============================================================================
# PAYOUT POLICY
# ============================================================================
# Minimum payout amount in cents ($10 = 1000 cents)
PAYOUT_MIN_THRESHOLD_CENTS=1000

# Reserve percentage to hold for chargebacks/refunds (0-100)
# Start with 0, adjust based on chargeback rate
PAYOUT_RESERVE_PERCENT=0

# Timezone for payout scheduling
PAYOUT_TIMEZONE=UTC

# Cron schedule for payouts (6am UTC on 1st & 15th)
PAYOUT_CRON_SCHEDULE="0 6 1,15 * *"

# ============================================================================
# RETRY POLICY
# ============================================================================
PAYOUT_RETRY_MAX_ATTEMPTS=5
PAYOUT_RETRY_BACKOFF_MS=60000  # 1 minute

# ============================================================================
# SECURITY (Required for Production)
# ============================================================================
# Secret key for internal cron endpoints
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CRON_SECRET_KEY=your_secure_random_key_here

# Custom header name for cron authentication
CRON_HEADER_NAME=X-Cron-Secret

# ============================================================================
# OBSERVABILITY (Optional)
# ============================================================================
# Enable structured logging
PAYOUT_STRUCTURED_LOGS=true

# Slack webhook for payout alerts
SLACK_PAYOUT_WEBHOOK_URL=https://hooks.slack.com/services/xxx

# Email for critical alerts
PAYOUT_ALERT_EMAIL=admin@digis.cc

# ============================================================================
# FEATURE FLAGS (Optional)
# ============================================================================
# Enable instant payouts for premium creators
ENABLE_INSTANT_PAYOUTS=false

# Enable multi-currency support
ENABLE_MULTI_CURRENCY=false

# Enable automatic retry of failed payouts
ENABLE_AUTO_RETRY=true
